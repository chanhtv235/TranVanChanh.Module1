<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>requirement 5</title>
</head>
<style>
    table {
        border: 1px solid blue;
        border-collapse: collapse;
    }
    td, th {
        border: 1px solid darkgray;
        width: 120px;
        height: 35px;
        text-align: center;
    }
    input, label {
        font-size: 14px;
        color: blue;
        cursor: pointer;

    }
    tr:nth-child(odd) {
        background-color: #dddddd;
    }
    button {
        background-color: beige;
        color: blue;
        border: 1px solid darkgray;
        cursor: pointer;
    }
</style>

<body>
<label>Add new customer -</label>
<input type="button" onclick="addNewCustomer()" value="ADD">
<br><br>
<label>Total Amount -</label>
<input type="button" onclick="totalAmount()" value="VIEW">
<p id="result"></p>

<script>
    let customerList = [
        ['Chuong Hoang', 12345678, '20/04/1988', 'chuong@hoang.com','Quảng Trị', 'Platinum',
            15, 3, 7, 'Villa', 'Vip',1],
        ['Van Chuong', 12345678, '10/09/1977', 'abc@hoang.com','Đà Nẵng', 'Diamond',
            15, 2, 6, 'House', 'Normal',2],
        ['Hoang Kim', 12345678, '22/06/1980', 'kkkkk@hoang.com','Huế', 'Silver',
            15, 4, 9, 'Room', 'Business',0],
        ['Chuong Hoang', 12345678, '20/04/1988', 'chuong@hoang.com','Quảng Trị', 'Platinum',
            15, 3, 4, 'Villa', 'Vip',0],
        ['Van Chuong', 12345678, '10/09/1977', 'bbbbb@hoang.com','Đà Nẵng', 'Diamond',
            15, 2, 8, 'House', 'Normal',0],
        ['Hoang Kim', 12345678, '22/06/1980', 'hhhhhhh@hoang.com','Huế', 'Silver',
            15, 4, 5, 'Room', 'Business',0],
        ['Chuong Hoang', 12345678, '20/04/1988', 'sssss@hoang.com','Quảng Trị', 'Platinum',
            15, 3, 3, 'Villa', 'Vip',0],
        ['Van Chuong', 12345678, '10/09/1977', 'chuong@hoang.com','Đà Nẵng', 'Diamond',
            15, 2, 4, 'House', 'Normal',0],
        ['Hoang Kim', 12345678, '22/06/1980', 'love@hoang.com','Huế', 'Silver',
            15, 4, 6, 'Room', 'Business',0],
        ['Chuong Hoang', 12345678, '20/04/1988', 'chuong@happy.com','Quảng Trị', 'Platinum',
            15, 3, 8, 'Villa', 'Vip',0]
    ];
    display();

    function display() {
        let tableString = '';
        tableString += '<table>\n' +
            '    <caption><b>FURAMA RESORT CUSTOMER MANAGEMENT</b><br><br></caption>\n' +
            '    <tr>\n' +
            '        <th>No.</th>\n' +
            '        <th>Customer Name (0)</th>\n' +
            '        <th>Identity No. (1)</th>\n' +
            '        <th>Birthday (2)</th>\n' +
            '        <th>Email (3)</th>\n' +
            '        <th>Address (4)</th>\n' +
            '        <th>Customer Type (5)</th>\n' +
            '        <th>Discount (6)</th>\n' +
            '        <th>People Include (7)</th>\n' +
            '        <th>Rent Days (8)</th>\n' +
            '        <th>Service Type (9)</th>\n' +
            '        <th>Room Class (10)</th>\n' +
            '        <th>Total Amount (11)</th>\n' +
            '        <th>Edit Info</th>\n' +
            '        <th>Delete Info</th>\n' +
            '    </tr>';
        for(let i = 0; i < customerList.length; i++) {
            tableString += '<tr>';
            tableString += '<td>' +(i+1) + '</td>';
            for(let j = 0; j < customerList[i].length; j++) {
                tableString += '<td>'+ customerList[i][j]+'</td>';
            }
            //tableString += '<td id="td'+ i + '"' + ' onclick="totalAmount('+ i + ')">0</td>';
            tableString += '<td><button onclick="editCustomer('+ i + ')">Edit</button></td>' +
                '<td><button onclick="deleteCustomer('+ i + ')">Delete</button></td>';
            tableString += '</tr>';
        }
        tableString += '</table>';
        document.getElementById('result').innerHTML = tableString;
    }

    function addNewCustomer(){
        let num = prompt('How many customer to be added?');
        for(let i = 0; i < num; i++) {
            let newCustomer = [];
            let msg = '';
            for(let j = 0; j < 11; j++) {
                switch (j){
                    case 0:
                        msg = 'customer name';
                        break;
                    case 1:
                        msg = 'customer ID';
                        break;
                    case 2:
                        msg = 'customer birthday';
                        break;
                    case 3:
                        msg = 'customer email';
                        break;
                    case 4:
                        msg = 'customer address';
                        break;
                    case 5:
                        msg = 'customer type';
                        break;
                    case 6:
                        msg = 'discount';
                        break;
                    case 7:
                        msg = 'people included';
                        break;
                    case 8:
                        msg = 'rent days';
                        break;
                    case 9:
                        msg = 'service type';
                        break;
                    case 10:
                        msg = 'room class';
                        break;
                }
                newCustomer[j] = prompt("Person " + (i+1) + "_" + msg + ":");
                newCustomer[11] = 0;
            }
            customerList.push(newCustomer);
        }
        display();
    }

    function editCustomer(num) {
        let string = '';
        let prop = '';
        for(let j = 0; j < 11; j++) {
            switch (j) {
                case 0:
                    prop = 'Customer name';
                    break;
                case 1:
                    prop = 'Customer ID';
                    break;
                case 2:
                    prop = 'Customer birthday';
                    break;
                case 3:
                    prop = 'Customer email';
                    break;
                case 4:
                    prop = 'Customer address';
                    break;
                case 5:
                    prop = 'Customer type';
                    break;
                case 6:
                    prop = 'Discount';
                    break;
                case 7:
                    prop = 'People included';
                    break;
                case 8:
                    prop = 'Rent days';
                    break;
                case 9:
                    prop = 'Service type';
                    break;
                case 10:
                    prop = 'Room class';
                    break;
            }
            string += (j+1) +'. ' + prop + ": " + customerList[num][j] + '\n';
        }
        string += '12. CANCEL editing';
        let choose = prompt("Choose field to be edited: " + '\n' + string);
        let msg = '';
        switch (choose-1){
            case 0:
                msg = 'customer name';
                break;
            case 1:
                msg = 'customer ID';
                break;
            case 2:
                msg = 'customer birthday';
                break;
            case 3:
                msg = 'customer email';
                break;
            case 4:
                msg = 'customer address';
                break;
            case 5:
                msg = 'customer type';
                break;
            case 6:
                msg = 'discount';
                break;
            case 7:
                msg = 'people included';
                break;
            case 8:
                msg = 'rent days';
                break;
            case 9:
                msg = 'service type';
                break;
            case 10:
                msg = 'room class';
                break;
            case 11:
            default:
                break;
        }
        if(choose >= 1 && choose <= 11){
            customerList[num][choose-1] = prompt('Enter ' + msg + ":");
        }
        display();
    }

    function deleteCustomer(num){
        let choose = confirm('Do you really want to delete ' + customerList[num][0] + '?');
        if(choose) {
            customerList.splice(num, 1);
        } else {
            alert('You do not delete any customer.');
        }
        display();
    }

    // Calculate the total amount to be paid
    let villa = 500;
    let house = 300;
    let room = 100;
    let price = 0;
    let total = 0;
    function totalAmount(index) {
        for (index = 0; index < customerList.length; index++) {
            switch (customerList[index][9]) {
                case 'Villa':
                    price = villa;
                    break;
                case 'House':
                    price = house;
                    break;
                case 'Room':
                    price = room;
                    break;
            }
            total = (1-customerList[index][6]/100) * customerList[index][8] * price;
            customerList[index][11] = Math.ceil(total);
            //document.getElementById('td'+ index).innerHTML = total;
        }
        display();
    }
</script>
</body>
</html>